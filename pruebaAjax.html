<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="js/jquery-3.2.1.min.js"></script>
	<script>
            var httpRequest;

            function alertContents() {
                if (httpRequest.readyState === XMLHttpRequest.DONE) {
                    if (httpRequest.status === 200) {
                        alert(httpRequest.responseText);
                    } else {
                       alert('There was a problem with the request.');
                        alert(httpRequest.statusText);
                    }
                }
		window.location.href = "http://localhost:8888/index.php";
            }

            var alertcontentsGet2 = function () {
                var url = "http://localhost:8888/index.php";
                var data = {
                    user: "Gonzalo",
                    pass: "MolaMazo"
                };
                //$.get(url, data, function(result){alert ("Ha ido Bien la cosa");});

                //$.post(url, data, function(result){alert ("Ha ido Bien la cosa");});

                $.ajax({
                    url: url,
                    data: data,
                    method: "POST",

                    beforeSend: function () {
                        alert("preparo algo");
                    },

                    success: function (result) {
                        alert("qué hago con los datos");
			resArray = JSON.parse(result);
			alert ('la operación ha salido '+ resArray['status']+' con resultado '+ resArray.result);
			console.log(resArray);
                    },

                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(jqXHR.status);
                        alert(textStatus);
                        alert(errorThrown);
                    }

                });
            }

            function makeRequest() {
                httpRequest = new XMLHttpRequest();

                if (!httpRequest) {
                    alert('Giving up :( Cannot create an XMLHTTP instance');
                    return false;
                }
                httpRequest.onreadystatechange = alertContents;
                httpRequest.open('GET', 'http://localhost:8888/index.php?user=Gonzalo');
                httpRequest.send();
            }



            function carga() {
                document.getElementById("ajaxButton").addEventListener('click', alertcontentsGet2);
            }

        </script>

    </head>
    <body onload="carga()">
        <div>TODO write content</div>

        <button id="ajaxButton" type="button">Make a request</button>
    </body>
</html>
