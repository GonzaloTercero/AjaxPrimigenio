<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="js/jquery-3.2.1.min.js"></script>
	<script>
            var httpRequest;

            var alertcontentsGet2 = function () {
                var url = "http://localhost:8888/AjaxPrimigenio/index.php";
                var data = {
                    action : "checkLogin",
                    user: "Gonzalo",
                    pass: "MolaMazo"
                };


                $.ajax({
                    url: url,
                    data: data,
                    method: "POST",

                    beforeSend: function () {
                    },

                    success: function (result) {
			resArray = JSON.parse(result);
			
                        
                        
                        /* 
                         * POSITIVO EXTRA EL QUE CONSIGA 
                         * QUITAR EL TEXTO PREVIO QUE PONE
                         * ESTE TEXTO SE VA A BORRAR 
                         * 
                         * */
                        
                        
                        
                        
                        resArray.forEach(function(row){
                            newHtmlElement = document.createElement('a');
                            newHtmlElement.setAttribute('id',row.id) ;
                            newHtmlElement.innerHTML = row.alumno;
                            console.log(newHtmlElement);
                            $('#alumnos').append(newHtmlElement);
                        });
                        
        
        
                    },

                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(jqXHR.status);
                        alert(textStatus);
                        alert(errorThrown);
                    }

                });
            }



            var altaUsuario = function () {
                var url = "http://localhost:8888/AjaxPrimigenio/index.php";
                var data = {
                    action : "register",
                    user: "Alfredo",
                    pass: "MolaMazo",
                    email : "elmaildealfredo@alfredo.com",
                    rol : "alumno"
                };


                $.ajax({
                    url: url,
                    data: data,
                    method: "POST",

                    beforeSend: function () {
                    },

                    success: function (result) {
			resArray = JSON.parse(result);
			alert ('la operaci√≥n ha salido '+ resArray['status']+' con resultado '+ resArray.result);
			
                    },

                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(jqXHR.status);
                        alert(textStatus);
                        alert(errorThrown);
                    }

                });
            }


            function carga() {
                document.getElementById("ajaxButton").addEventListener('click', alertcontentsGet2);
                document.getElementById("ajaxButton2").addEventListener('click', altaUsuario);
            }

        </script>

    </head>
    <body onload="carga()">
        <div>TODO write content</div>

        <button id="ajaxButton" type="button">Login</button>
        <button id="ajaxButton2" type="button">Registrar</button>
        <div id ='alumnos'>ESTE TEXTO SE VA A BORRAR</div>
    </body>
</html>
